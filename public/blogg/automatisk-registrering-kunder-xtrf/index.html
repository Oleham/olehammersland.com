<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://www.olehammersland.com/images/favicon.png" />
<title>Automatisk registrering av kunder i XTRF | Ole Hammersland</title>
<meta name="title" content="Automatisk registrering av kunder i XTRF" />
<meta name="description" content="Spr√•ktjeneste, oversetterbransjen, XTRF, utvikling og automatisering for oversetterbransjen. Triks til √• bruke XTRF. Python sitt nettframework Django" />
<meta name="keywords" content="english,python,xtrf,automatisering," />


<meta property="og:title" content="Automatisk registrering av kunder i XTRF" />
<meta property="og:description" content="Spr√•ktjeneste, oversetterbransjen, XTRF, utvikling og automatisering for oversetterbransjen. Triks til √• bruke XTRF. Python sitt nettframework Django" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.olehammersland.com/blogg/automatisk-registrering-kunder-xtrf/" /><meta property="og:image" content="https://www.olehammersland.com/images/share.png"/><meta property="article:section" content="blogg" />
<meta property="article:published_time" content="2021-01-27T19:46:15+01:00" />
<meta property="article:modified_time" content="2021-01-27T19:46:15+01:00" />




<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://www.olehammersland.com/images/share.png"/>

<meta name="twitter:title" content="Automatisk registrering av kunder i XTRF"/>
<meta name="twitter:description" content="Spr√•ktjeneste, oversetterbransjen, XTRF, utvikling og automatisering for oversetterbransjen. Triks til √• bruke XTRF. Python sitt nettframework Django"/>



<meta itemprop="name" content="Automatisk registrering av kunder i XTRF">
<meta itemprop="description" content="Spr√•ktjeneste, oversetterbransjen, XTRF, utvikling og automatisering for oversetterbransjen. Triks til √• bruke XTRF. Python sitt nettframework Django"><meta itemprop="datePublished" content="2021-01-27T19:46:15+01:00" />
<meta itemprop="dateModified" content="2021-01-27T19:46:15+01:00" />
<meta itemprop="wordCount" content="1038"><meta itemprop="image" content="https://www.olehammersland.com/images/share.png"/>
<meta itemprop="keywords" content="english,python,xtrf,automatisering," />
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>

  :root {
    --main-color: rgb(35, 19, 253);
}

  @import url('fonts/inter.css');
    html { 
      font-family: 'Inter', sans-serif; 
    }
  @supports (font-variation-settings: normal) {
    html { 
      font-family: 'Inter var', sans-serif; 
    }
  }

  body {
    margin: auto;
    font-size: 1.2rem;
    padding: 20px;
    max-width: 720px;
    text-align: left;
    background-color: #fff;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: #444;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  strong,
  b {
    color: #222;
  }

  a {
    color: #3273dc;
     
  }

  .title {
    text-decoration: none;
    border: 0;
  }

 .logo-icon {
    min-width: 100px;
    margin-right: 10px;
  }

  .logo-box {
    display:flex;
    width: 100%;
  }

  .title span {
    font-weight: 400;
  }

  #main-nav a {
    font-size: 1.5rem;
    margin-right: 5px;
    padding-right: 10px;
    color:#444;
    text-decoration: none;
    border-right: 2px solid var(--main-color);
  }

  #main-nav a:hover {
    color:rgb(145, 139, 139)
  }

  #main-nav a:last-of-type {
    border-right: none;
  }

  #burger {
    display: none;
    margin: 10px;
  }

  .burger-line {
    height: 5px;
    width: 35px;
    background-color:var(--main-color);
    margin-bottom: 5px;
  }

  textarea {
    width: 100%;
    font-size: 16px;
  }

  input {
    font-size: 16px;
  }

  content {
    line-height: 1.6;
  }

  table {
    width: 100%;
  }

  img {
    max-width: 100%;
  }

  code {
    padding: 2px 5px;
    background-color: #f2f2f2;
  }

  pre code {
    color: #222;
    display: block;
    padding: 20px;
    white-space: pre-wrap;
    font-size: 14px;
  }

  blockquote {
    border-left: 1px solid #999;
    color: #222;
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px;
    text-align: center;
  }

  .helptext {
    color: #777;
    font-size: small;
  }

  .errorlist {
    color: #eba613;
    font-size: small;
  }

  .blog-posts a {
    text-decoration: none;
    color:#444;
  }

  .blog-posts h3 {
    border-bottom: 1px solid var(--main-color);
  }

  .blog-posts h3::first-letter {
    color:var(--main-color);
  }

  .blog-posts a:hover, .blog-posts h3:hover {
    color:rgb(145, 139, 139);
  }

  #pagination {
    margin: auto;
    width: 100%;
    align-items: center;
    font-size: 1.5rem;
    border: 1px solid var(--main-color);
    margin-bottom: 20px;
    margin-top: 20px;
    text-align: center;
  }
  
  #pagination span {
    padding-right: 20px;
    padding-left: 20px;
  }

  #pagination button {
    border: none;
    background-color: inherit;
    font-size: inherit;
    color: inherit;
    cursor: pointer;
  }

  div#TableOfContents {
    padding-top: 10px; 
  }
  #TableOfContents li {
    list-style: circle;
  }

  .blog-teaser  {
    border: 3px solid var(--main-color);
    border-radius: 5%;
    padding: 20px;
    background-color: lightblue;
    box-shadow: 5px -5px 10px black;
    margin-bottom: 15px;
  }

  .blog-teaser h3 {
    text-align: center;
  }

  @media screen and (max-width: 700px) {
    #burger {
      display:block
    }

    #main-nav {
      display: absolute;
      transform: translateY(calc(-100vh));
      height: 5px;
      transition: 1s;
      border-left: 2px solid var(--main-color);
      padding-left: 10px;
    }

    #main-nav a {
      border:none;
    }

    #main-nav.open-burger {
      display: flex;
      height: unset;
      flex-direction: column;
      transition: 1s;
      font-size: 2rem;
      transform: translateY(0);
    }

    .open-burger .burger-line {
      margin:none;
      transform: none;
    }

   .open-burger #line1 {
      transform: rotate(45deg) translateY(6px) translateX(1px);
      margin:none;
      transition: 1s ease-out;
    }
    .open-burger #line2 {
      display:none;
    }
    .open-burger #line3 {
      transform: rotate(-45deg) translateY(-6px);
      margin:none;
      transition: 1s ease-out;
    }
  }



  @media screen and (max-width: 400px) {
    .logo-box {
      flex-direction: column;
    }

    .title {
      border-bottom: 5px solid var(--main-color);
    }

    .logo-icon {
      display:none;
    }

    #burger {
      align-self: flex-end;
    }
  }
</style></head>

<body>
  <header>
<div class="logo-box">
  <a href="/" class="title">
    <img class="logo-icon" src="/images/book.png">
  </a>
  <h2>Ole Hammersland</h2>
  <div id="burger">
      <div class="burger-line" id="line1"></div>
      <div class="burger-line" id="line2"></div>
      <div class="burger-line" id="line3"></div>
  </div>
</div>
<nav id="main-nav"><a href="/">Hjem</a>

<a href="/om/">Om</a>

<a href="/spr%C3%A5ktjenester/">Spr√•ktjenester</a>

<a href="/sykkel/">Sykkel</a>

<a href="/bokhylla/">üìö</a>


<a href="/blogg">Blogg</a>

</nav>

</header>
  <main>



<div id="TableOfContents">
<p><strong>Innhold:</strong></p>
<nav id="TableOfContents">
  <ol>
    <li><a href="#automatically-registering-clients-on-the-xtrf-translation-system">Automatically registering clients on the XTRF translation system</a>
      <ol>
        <li><a href="#why">Why?</a></li>
        <li><a href="#gathering-information">Gathering information</a></li>
        <li><a href="#registering">Registering</a></li>
        <li><a href="#to-test-the-django-site">To test the Django site</a></li>
        <li><a href="#to-sum-up">To sum up</a></li>
      </ol>
    </li>
  </ol>
</nav>

</div>
<h1>Automatisk registrering av kunder i XTRF</h1>
<p>
  <i>
    <time datetime='2021-01-27' pubdate>
      F√∏rst publisert: 27.01.2021
    </time>
  </i>
</p>


<content>
  <p>Denne bloggposten beskriver et lite pilotkonsept jeg lagde i fjor. Jeg arbeidet da som selger for GLOBALscandinavia AS, og hadde ansvaret for √• forberede tilbud til kunder som meldte seg via nettsiden v√•r. <a href="https://github.com/Oleham/xtrf_client_registration">Den samme oppsummeringen ligger ute p√• min Github</a></p>
<p>Dette prosjektet var en god trening i √• bruke b√•de Django og JSON-API. Jeg m√•tte sette meg inn det √• selv lage et API, og det √• forst√• dokumentasjonen til API-et noen andre har laget.
Husker det var spesielt morsomt √• utvide funksjonaliteten med automatiske varsler til Teams! Og ikke minst var det min f√∏rste erfaring med <a href="https://www.linode.com">Linode</a>, hvor man kan leie seg en liten virtuell server for noen f√• euro i m√•neden. Det er tjenesten jeg n√• hoster denne nettsiden p√•.</p>
<hr>
<h2 id="automatically-registering-clients-on-the-xtrf-translation-system">Automatically registering clients on the XTRF translation system</h2>
<h3 id="why">Why?</h3>
<p>Working as a sales person at a translation agency, I recieved numerous requests from potential clients requesting a quote. The requests are usually sent to a large number of agencies in order for them to compare prices. Sending these probably didn&rsquo;t take the potential clients very long. However, I found that registering them in XTRF so that I could prepare a quote ended up eating up a lot of my time.</p>
<p>XTRF is a nice enough TMS (Translation Management System), but it&rsquo;s heavy: with a lot of menus. Most of the time, you end up entering the same information for everyone. So why not automate the process?</p>
<h3 id="gathering-information">Gathering information</h3>
<p>Interestingly enough, most potential clients went through our web page in order to request a quote. There, they would be able to enter their basic contact information along with their request. I would then register them as a new client in the XTRF database, drawing on online sources to find the missing pieces. Especially the organization number or CSV-number, which is needed for tax reasons.</p>
<p>In my new project, I would allow the clients to simply enter this information themselves. The tax number (organization number in Sweden/Norway, CVR in Denmark) is the most important piece of information. Depending on which Scandinavian country the company was from, I would know what else to set up when registering them to the XTRF database: project managers, invoicing settings, responsible sales person, etc.</p>
<p>Of course, it would also be nice to keep all the not so serious-sounding clients out of our XTRF database. I came up with a simple architecture looking something like this:</p>
<p><img src="/images/blogg/automatisk-registrering-kunder-xtrf-chart.png" alt="The architecture of my site"></p>
<p>Here, the clients could interact with our web page (represented by the IP adress in the illustration). The sales team (&ldquo;Salg&rdquo;) would recieve a notification, and choose whether to subsequently transfer the information from the web page into the main XTRF database.</p>
<p>By first having the potential clients enter their information into an intermediary database, my translation agency would be able to screen the requests before choosing to automatically registering them on XTRF. That&rsquo;s good, as we&rsquo;d get a lot of requests for smaller translation jobs, two-pagers like CVs and diplomas, which wasn&rsquo;t something we as a B2B translation agency would do.</p>
<p>A more prominent reason for this architecture is also simply the fact that I was learning Django at the time. I thought this would be a good opportunity to make use of the <a href="https://www.django-rest-framework.org/">Django REST API framework</a>. I quickly built a very simple pilot web site containing only one form in the frontend.</p>
<p><img src="/images/blogg/automatisk-registrering-kunder-xtrf-form.jpg" alt="The form for collecting user input"></p>
<p>Here, the potential clients would be able enter their information and write a short message to request a quote.
This form was linked to the following Django model:</p>
<div class="highlight"><pre tabindex="0" style="color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#cdcd00">class</span> <span style="color:#00cdcd">Company</span>(models<span style="color:#39c">.</span>Model):
    name <span style="color:#39c">=</span> models<span style="color:#39c">.</span>CharField(max_length<span style="color:#39c">=</span><span style="color:#cd00cd">300</span>, verbose_name<span style="color:#39c">=</span><span style="color:#cd0000">&#34;Name&#34;</span>)
    publish_date <span style="color:#39c">=</span> models<span style="color:#39c">.</span>DateTimeField(auto_now<span style="color:#39c">=</span><span style="color:#cdcd00">True</span>)
    adressLine1 <span style="color:#39c">=</span> models<span style="color:#39c">.</span>CharField(max_length<span style="color:#39c">=</span><span style="color:#cd00cd">200</span>, verbose_name<span style="color:#39c">=</span><span style="color:#cd0000">&#34;Adress Line 1&#34;</span>)
    adressLine2 <span style="color:#39c">=</span> models<span style="color:#39c">.</span>CharField(blank<span style="color:#39c">=</span><span style="color:#cdcd00">True</span>, max_length<span style="color:#39c">=</span><span style="color:#cd00cd">200</span>, verbose_name<span style="color:#39c">=</span><span style="color:#cd0000">&#34;Adress Line 2&#34;</span>)
    area_code <span style="color:#39c">=</span> models<span style="color:#39c">.</span>CharField(blank<span style="color:#39c">=</span><span style="color:#cdcd00">True</span>, max_length<span style="color:#39c">=</span><span style="color:#cd00cd">200</span>, verbose_name<span style="color:#39c">=</span><span style="color:#cd0000">&#34;Area Code&#34;</span>)
    email <span style="color:#39c">=</span> models<span style="color:#39c">.</span>EmailField(verbose_name<span style="color:#39c">=</span><span style="color:#cd0000">&#34;E-Mail&#34;</span>)
    phone_number <span style="color:#39c">=</span> models<span style="color:#39c">.</span>CharField(max_length<span style="color:#39c">=</span><span style="color:#cd00cd">200</span>, verbose_name<span style="color:#39c">=</span><span style="color:#cd0000">&#34;Phone Number&#34;</span>)
    city <span style="color:#39c">=</span> models<span style="color:#39c">.</span>CharField(blank<span style="color:#39c">=</span><span style="color:#cdcd00">True</span>, max_length<span style="color:#39c">=</span><span style="color:#cd00cd">200</span>, verbose_name<span style="color:#39c">=</span><span style="color:#cd0000">&#34;City&#34;</span>)
    country_id <span style="color:#39c">=</span> models<span style="color:#39c">.</span>ForeignKey(Country, on_delete<span style="color:#39c">=</span>models<span style="color:#39c">.</span>CASCADE, verbose_name<span style="color:#39c">=</span><span style="color:#cd0000">&#34;Country&#34;</span>)
    idNumber <span style="color:#39c">=</span> models<span style="color:#39c">.</span>CharField(blank<span style="color:#39c">=</span><span style="color:#cdcd00">True</span>, max_length<span style="color:#39c">=</span><span style="color:#cd00cd">30</span>, verbose_name<span style="color:#39c">=</span><span style="color:#cd0000">&#34;Company ID/Org.No./CVR No.&#34;</span>)
    document <span style="color:#39c">=</span> models<span style="color:#39c">.</span>FileField(blank<span style="color:#39c">=</span><span style="color:#cdcd00">True</span>, upload_to<span style="color:#39c">=</span><span style="color:#cd0000">&#39;documents/&#39;</span>, verbose_name<span style="color:#39c">=</span><span style="color:#cd0000">&#34;Upload Files that need translating&#34;</span>)
    freetext <span style="color:#39c">=</span> models<span style="color:#39c">.</span>TextField(blank<span style="color:#39c">=</span><span style="color:#cdcd00">True</span>, verbose_name<span style="color:#39c">=</span><span style="color:#cd0000">&#34;What can we help you with?&#34;</span>)

    <span style="color:#cdcd00">def</span> __str__(self):
        <span style="color:#cdcd00">return</span> self<span style="color:#39c">.</span>name

    <span style="color:#cdcd00">def</span> get_absolute_url(self):
        <span style="color:#cdcd00">return</span> <span style="color:#cd0000">&#34;success/&#34;</span>

</code></pre></div><p>A Django model defines the database fields for the table which is connected to the web page form. When the user submits the form, the information is organized and stored in the corresponding fields of that database table (sort of like an Excel spreadsheet).
As you might tell from the model, the potential client would also be able to directly upload the file he or she wanted translated.</p>
<h3 id="registering">Registering</h3>
<p>When someone entered the above information to request a quote, all the information was stored on the database of my Django site. It was then accessible via the Django REST API in JSON format.</p>
<p>I would get an email from the server informing me of the request. Also, my team would recieve a message on <a href="https://docs.microsoft.com/en-us/microsoftteams/platform/webhooks-and-connectors/how-to/connectors-using">Teams through a connector</a>, which would allow us to directly discuss the request.</p>
<p><img src="/images/blogg/automatisk-registrering-kunder-xtrf-teams.jpg" alt="Demo of the Teams connector"></p>
<p>If we deemed the request as serious, we would run the python script <strong>add_client.py</strong>, using the ID of the request as an argument, i.e. <code>python3 add_client.py 23</code>. The script downloaded the information from the Django API and instantly uploaded it to the XTRF database through the <a href="https://www.xtrf.eu/xtrf-api-doc/home-api">Home Portal API</a>.</p>
<h3 id="to-test-the-django-site">To test the Django site</h3>
<p>Install something similar to the requirements in <strong>requirements.txt</strong>.
Go into the client_registration folder, migrate the database and run the test server.
Add a super user so that you will be able to log in to the admin and API panels.</p>
<div class="highlight"><pre tabindex="0" style="color:#ccc;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#cd00cd">cd</span> client_registration
python3 manage.py makemigrations
python3 manage.py makemigrations registration_app
python3 manage.py migrate
python3 manage.py createsuperuser
python3 manage.py runserver
</code></pre></div><p>Go to localhost:8000 and try adding someone to your database. You should see the company you added on localhost:8000/api/companies</p>
<p>To review the email and Teams-functionality, check out the commented out code in <strong>client_registration/registration_app/views.py</strong></p>
<h3 id="to-sum-up">To sum up</h3>
<p>This was a fun &ldquo;proof-of-concept&rdquo;. XTRF is a very big TMS that aims to satisfy every thinkable need. For us, the translation business is mostly fast-moving and fluid. Why invest too much time in a potential client when the likelihood of them picking one of the fifteen other agencies they contacted is so high?</p>
<p>Advantages of automating client registration in XTRF:</p>
<ul>
<li>Instantanous registration within seconds</li>
<li>All standard fields entered correctly based on country</li>
<li>No danger of spam, as the client go through an intermediate server</li>
<li>Teams integration ‚Äì better communication!</li>
</ul>

</content>


<hr>
<p style="text-align: center;"><a href="/blogg/">Tilbake til bloggoversikten</a></p>
<h4>Tagger:</h4>
<p>
  
  <a href="https://www.olehammersland.com/blogg/english/">#english</a>
  
  <a href="https://www.olehammersland.com/blogg/python/">#python</a>
  
  <a href="https://www.olehammersland.com/blogg/xtrf/">#xtrf</a>
  
  <a href="https://www.olehammersland.com/blogg/automatisering/">#automatisering</a>
  
</p>



  </main>
  <footer>Kontakt: <a href="mailto:post@olehammersland">post@olehammersland.com</a>
</footer>

  
  <script src=/bundle.js></script>
</body>

</html>
